(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{131:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),i=a(8),c=a(15),l=a(11),s=r.a.memo((function(e){return r.a.createElement("div",{className:"cabinet__info__cover"},r.a.createElement("ul",{className:"cabinet__info__list"},Object.keys(e.info.info).map((function(t){if(void 0!==e.info.info[t])return r.a.createElement("li",{key:t,className:"cabinet__info__item"},r.a.createElement("span",{className:"cabinet__info__item_bold"},t),":"," ",e.info.info[t])}))))})),_=a(31),m=a(20),u=a(14),p=r.a.memo((function(e){return r.a.createElement("div",null,r.a.createElement(l.a,{toggle:e.modal},r.a.createElement(m.a,null)),r.a.createElement("form",{action:"#",className:"set_cabinet__form"},r.a.createElement("h3",{className:"set_cabinet__form__title"},"Set your delivery info:"),r.a.createElement(_.a,{inputs:e.inputs,changeHandler:e.onInput}),r.a.createElement("div",{className:"set_cabinet__form__submit__cover"},r.a.createElement("button",{type:"submit",className:"set_cabinet__form__submit",onClick:function(t){e.check(t),localStorage.setItem("id",e.auth.localId),localStorage.setItem("nameChanged","true")}},"Send"))),r.a.createElement("div",null,r.a.createElement("h3",{className:"add__photo__title"},"Set photo profile"),r.a.createElement("form",{action:"".concat(u.a,"/api/v1.0/user/setPhoto"),id:"avatar",method:"POST",encType:"multipart/form-data",className:"add__photo__form",onSubmit:function(t){return localStorage.setItem("id",e.auth.localId),void localStorage.setItem("photoChanged",!0)}},r.a.createElement("div",{className:"add__photo__input__cover"},r.a.createElement("input",{type:"file",id:"",name:"avatar",form:"avatar",accept:"image/*",onChange:function(e){return function(e){var t=document.getElementById("preview1");t.style.backgroundImage="url("+URL.createObjectURL(e.target.files[0])+")",t.style.borderRadius="50%"}(e)},style:{width:"20rem",height:"20rem",opacity:0,margin:0,zIndex:10,top:0,left:0,position:"absolute",cursor:"pointer"}}),r.a.createElement("div",{className:"add__photo__preview",id:"preview1"})),r.a.createElement("div",{className:"add__photo__submit__cover"},r.a.createElement("button",{type:"submit",id:"avatar__submit",name:"submit",form:"avatar",className:"add__photo__submit"},"Send")))))})),d=Object(c.g)((function(e){for(var t=[],a=0;a<e.num;a++)t.push(a+1);return r.a.createElement("div",{className:"pizza__cabinet__pagination__list__cover"},r.a.createElement("ul",{className:"pizza__cabinet__pagination__list"},t.map((function(t,a){return r.a.createElement("li",{key:t,className:e.page==t?"pizza__cabinet__pagination__item pizza__cabinet__pagination__item_active":"pizza__cabinet__pagination__item",onClick:function(){e.changePage(t),e.viewOrders("page=".concat(a+1,"&limit=4&id=").concat(e.id)),e.history.push("/personalRoom/".concat(a+1))}},t)}))))}));function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var v=r.a.memo((function(e){var t=1;e.orders.orders&&e.orders.orders.length>0&&(t=Math.ceil(e.orders.count/4)),Object(n.useEffect)((function(){return e.viewOrders("page=1&limit=4&id=".concat(e.id))}),[]);var a,o=f(Object(n.useState)(!1),2),i=o[0],c=o[1],s=f(Object(n.useState)(null),2),_=s[0],u=s[1],p=f(Object(n.useState)(1),2),v=p[0],h=p[1];return a=e.orders.orders?!e.orders.orders.error&&e.orders.orders.length>0?e.orders.orders.map((function(t,a){return!t.pizzas.length>0?r.a.createElement("div",{key:t._id,className:"prev__order__cover"},r.a.createElement("div",{className:"delete__order",onClick:function(){c(!0),u(t._id)}}),r.a.createElement("div",{className:"prev__order__info__cover"},r.a.createElement("p",null,r.a.createElement("span",{className:"prev__order__name"},t.name)," ordered"," ",t.pizzaName," worth ",t.cost,"$, weight ",t.weight,"g. and diameter ",t.diameter,"cm"),r.a.createElement("p",null,t.street,t.house,"-",t.flat)),r.a.createElement("div",{className:"prev__order__icon__cover"},Object.keys(t.ingredients).map((function(a){return t.ingredients[a].count>0?r.a.createElement("div",{className:"pizza__view__icon pizza__view__icon_small",key:a},r.a.createElement("div",{className:"pizza__view__icon__count pizza__view__icon__count_small"},r.a.createElement("strong",null,t.ingredients[a].count,"X")),r.a.createElement("div",{className:"pizza__view__icon__pic"},r.a.createElement("img",{src:e.browser.safari?"/assets/img/".concat(a,".png"):"/assets/img/webp/".concat(a,".webp"),alt:a,className:"pizza__view__icon__image"}))):null})))):r.a.createElement("div",{key:t._id,className:"prev__order__cover"},r.a.createElement("div",{className:"delete__order",onClick:function(){c(!0),u(t._id)}}),r.a.createElement("div",{className:"prev__order__info__cover"},r.a.createElement("p",null,r.a.createElement("span",{className:"prev__order__name"},t.name," "),"ordered"," ",r.a.createElement("span",{className:"prev__order__name"},t.pizzaName)),r.a.createElement("p",null,t.street,t.house,"-",t.flat," total:"," ",r.a.createElement("span",{className:"prev__order__name"},t.totalCost,"$"))),r.a.createElement("div",{className:"prev__order__icon__cover"},t.pizzas.map((function(n,o){return r.a.createElement("div",{key:o,className:"multi__pizza__single__cover"},n.name?r.a.createElement("p",{className:"multi__pizza__name__obj"},n.name):null,r.a.createElement("p",{key:a+t+o},"worth ",n.cost,"$, weight ",n.weight,"g. and diameter ",n.diameter," cm"),r.a.createElement("div",{className:"prev__order__icon__cover"},Object.keys(n.ingredients).map((function(t){return n.ingredients[t].count>0?r.a.createElement("div",{className:"pizza__view__icon pizza__view__icon_small",key:t},r.a.createElement("div",{className:"pizza__view__icon__count pizza__view__icon__count_small"},r.a.createElement("strong",null,n.ingredients[t].count,"X")),r.a.createElement("div",{className:"pizza__view__icon__pic"},r.a.createElement("img",{src:e.browser.safari?"/assets/img/".concat(t,".png"):"/assets/img/webp/".concat(t,".webp"),alt:t,className:"pizza__view__icon__image"}))):null}))))}))))})):null:r.a.createElement("h1",null,"No orders get yet"),r.a.createElement("div",null,r.a.createElement(l.a,{toggle:e.orders.modal},r.a.createElement("div",null,r.a.createElement(m.a,null))),r.a.createElement(l.a,{toggle:i},r.a.createElement("div",{className:"modal__delete"},r.a.createElement("div",{className:"modal__delete__cover"},r.a.createElement("div",null,r.a.createElement("h3",null,"Are you shure?")),r.a.createElement("div",{className:"modal__delete__buttons__cover"},r.a.createElement("button",{className:"modal__delete__button",onClick:function(){e.delete(_),c(!1)}},"Yes"),r.a.createElement("button",{className:"modal__delete__button",onClick:function(){return c(!1)}},"Cancel"))))),r.a.createElement("button",{onClick:function(){e.viewOrders("?page=1&limit=4&id=".concat(e.id)),h(1)},className:"refresh__orders__btn"},"Refresh"),a,r.a.createElement(d,{num:t,page:v,changePage:h,viewOrders:e.viewOrders,id:e.id}))})),h=a(7);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?N(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var k=function(e){function t(){var e,a;g(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return O(N(a=y(this,(e=w(t)).call.apply(e,[this].concat(r)))),"state",{showingContent:1,trigger:!1}),O(N(a),"sendDataHnadler",(function(e){e.preventDefault();var t={flat:a.props.cabinetSet.inputs.flat.value,house:a.props.cabinetSet.inputs.house.value,name:a.props.cabinetSet.inputs.name.value,street:a.props.cabinetSet.inputs.street.value,phone:a.props.cabinetSet.inputs.phone.value};a.props.fetchDataFun(t,a.props.cabinetSet.allGood)})),O(N(a),"changeContentHandler",(function(e){a.setState({trigger:!0}),setTimeout((function(){a.setState({showingContent:e,trigger:!1})}),280)})),O(N(a),"showModalHandler",(function(e){a.props.deleteOrderfun(e,a.props.auth.localId)})),a}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){this.props.getInfoFun(this.props.auth.localId)}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"container"},r.a.createElement(l.a,{toggle:this.props.cabinet.modalShow},r.a.createElement(m.a,null)),r.a.createElement("div",{className:"room__change__mail__cover"},r.a.createElement(i.c,{to:"/personalRoom/changeMail"},r.a.createElement("button",{className:"room__change__mail"},"Change mail."))),this.props.auth.isAuthindicated?null:r.a.createElement(c.a,{to:"/"}),r.a.createElement("nav",{className:"room__nav"},r.a.createElement("ul",{className:"room__list"},r.a.createElement("li",{className:"room__item"},r.a.createElement(i.c,{to:"/personalRoom",className:"room__link",onClick:function(){return e.changeContentHandler(1)}},"Info")),r.a.createElement("li",{className:"room__item"},r.a.createElement(i.c,{to:"/personalRoom",className:"room__link",onClick:function(){return e.changeContentHandler(2)}},"Set my contacts")),r.a.createElement("li",{className:"room__item"},r.a.createElement(i.c,{to:"/personalRoom/1",className:"room__link",onClick:function(){return e.changeContentHandler(3)}},"My orders")))),r.a.createElement("div",{className:this.state.trigger?"room__output_cabinet hide":"room__output_cabinet show"},r.a.createElement("div",{className:"cabinet__user__cover"},r.a.createElement("div",{className:"log__out__cover"},r.a.createElement("div",{className:"log__out__name__block"},r.a.createElement("p",{className:"cabinet__user__name"},"undefined"!==this.props.auth.name?this.props.auth.name:"user")),r.a.createElement("div",{className:"log__out__image__block"},this.props.auth.photo.startsWith("data")?r.a.createElement("div",{className:"log__out__image__div",style:{backgroundImage:"url("+this.props.auth.photo+")"}}):r.a.createElement("div",{className:"log__out__image__div",style:{backgroundImage:"url(/assets/users/"+this.props.auth.photo+")"}})))),1===this.state.showingContent?r.a.createElement(s,{info:this.props.cabinet}):null,2===this.state.showingContent?r.a.createElement(p,{inputs:this.props.cabinetSet.inputs,modal:this.props.cabinetSet.modalShow,onInput:this.props.onInputFun,check:this.sendDataHnadler,auth:this.props.auth}):null,3===this.state.showingContent?r.a.createElement(v,{viewOrders:this.props.viewOrdersFun,orders:this.props.cabinetGet,token:this.props.auth.token,id:this.props.auth.localId,delete:this.showModalHandler,browser:this.props.browser}):null))}}])&&E(a.prototype,n),o&&E(a,o),t}(r.a.Component);t.default=Object(o.b)((function(e){return{auth:e.auth,cabinet:e.cabinet,cabinetSet:e.cabinetSet,cabinetGet:e.cabinetGetOrders,browser:e.browser}}),(function(e){return{getInfoFun:function(t){return e(Object(h.L)(t))},onInputFun:function(t){return e(Object(h.cb)(t))},fetchDataFun:function(t,a){return e(Object(h.bb)(t,a))},viewOrdersFun:function(t){return e(Object(h.gb)(t))},deleteOrderfun:function(t,a){return e(Object(h.A)(t,a))}}}))(k)}}]);