(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{133:function(e,a,t){"use strict";t.r(a);var l=t(0),_=t.n(l),s=t(9),i=t(12);var r=e=>_.a.createElement("div",{className:"ready__builds__modal__cover"},_.a.createElement("div",{className:"ready__builds__modal__block"},_.a.createElement("div",{className:"ready__builds__modal__title__cover"},_.a.createElement("h3",{className:"ready__builds__modal__title"},"Choose option:")),_.a.createElement("div",{className:"ready__builds__modal__btns__cover"},_.a.createElement("div",{className:"ready__builds__modal__btn__cover"},_.a.createElement("button",{className:"ready__builds__modal__btn",onClick:()=>e.add(e.curPizza)},"Add to list and contine")),_.a.createElement("div",{className:"ready__builds__modal__btn__cover"},_.a.createElement("button",{className:"ready__builds__modal__btn",onClick:()=>{e.add(e.curPizza),e.redirect()}},"Add and proceed to checkout"))))),d=t(76),c=t(6),n=t(11),o=t(17);var m=e=>{const a=e.reviews?e.reviews.map(e=>e.user):[];return _.a.createElement("div",{className:"builds__reviews__block__cover"},_.a.createElement("div",{className:"builds__review__preview__cover",onClick:()=>{const a=[...e.reviews];e.showReviews(a),e.showReviewsModal()}},_.a.createElement("div",{className:"builds__review__preview__stars__cover"},(()=>{const a=(()=>{let a=0;if(e.reviews)return e.reviews.map(e=>a+=e.rating),Math.round(a/e.reviews.length)})(),t=[];for(let e=0;e<5;e++)e<a?t.push(_.a.createElement("div",{className:"add__review__star__cover",key:e},_.a.createElement("svg",{className:"build_review__star__icon",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},_.a.createElement("path",{d:"M12.9,2.6l2.3,5c0.1,0.3,0.4,0.5,0.7,0.6l5.2,0.8C22,9,22.3,10,21.7,10.6l-3.8,3.9c-0.2,0.2-0.3,0.6-0.3,0.9   l0.9,5.4c0.1,0.8-0.7,1.5-1.4,1.1l-4.7-2.6c-0.3-0.2-0.6-0.2-0.9,0l-4.7,2.6c-0.7,0.4-1.6-0.2-1.4-1.1l0.9-5.4   c0.1-0.3-0.1-0.7-0.3-0.9l-3.8-3.9C1.7,10,2,9,2.8,8.9l5.2-0.8c0.3,0,0.6-0.3,0.7-0.6l2.3-5C11.5,1.8,12.5,1.8,12.9,2.6z"})))):t.push(_.a.createElement("div",{className:"add__review__star__cover",key:e},_.a.createElement("svg",{className:"build_review__star__icon build_review__star__icon__inactive",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},_.a.createElement("path",{d:"M12.9,2.6l2.3,5c0.1,0.3,0.4,0.5,0.7,0.6l5.2,0.8C22,9,22.3,10,21.7,10.6l-3.8,3.9c-0.2,0.2-0.3,0.6-0.3,0.9   l0.9,5.4c0.1,0.8-0.7,1.5-1.4,1.1l-4.7-2.6c-0.3-0.2-0.6-0.2-0.9,0l-4.7,2.6c-0.7,0.4-1.6-0.2-1.4-1.1l0.9-5.4   c0.1-0.3-0.1-0.7-0.3-0.9l-3.8-3.9C1.7,10,2,9,2.8,8.9l5.2-0.8c0.3,0,0.6-0.3,0.7-0.6l2.3-5C11.5,1.8,12.5,1.8,12.9,2.6z"}))));return t})())," ",_.a.createElement("span",{className:"builds__review__preview__count"},"(",e.reviews.length,")")),e.auth.isAuthindicated&&a.includes(e.auth.localId)?_.a.createElement("span",{className:"builds__add__review__btn",onClick:()=>{e.modal("edit"),e.setId(e.id)}},"Edit review"):e.auth.isAuthindicated?_.a.createElement("span",{className:"builds__add__review__btn",onClick:()=>{e.modal(void 0),e.setId(e.id)}},"Write review"):null)};var v=e=>{const[a,t]=Object(l.useState)(3),[s,i]=Object(l.useState)(!1),[r,d]=Object(l.useState)(!1),c=new RegExp(/^[a-zA-Z][a-zA-Z0-9-_ .]{5,20}$/),n=new RegExp(/^[a-zA-Z][a-zA-Z0-9-_ .,)(!?]{4,200}$/);return _.a.createElement("div",{className:"builds__modal__reviews__cover"},_.a.createElement("div",{className:"builds__modal__reviews__add__cover",onClick:e=>e.stopPropagation()},_.a.createElement("form",{action:"#",id:"builds__review__form",onSubmit:e=>e.preventDefault()},_.a.createElement("div",{className:"builds__modal__reviews__add__name__cover"},_.a.createElement("label",{htmlFor:"builds__review__name"},"Enter your name:"),_.a.createElement("input",{onChange:e=>i(c.test(e.target.value)),type:"text",id:"builds__review__name",placeholder:"Name",className:s?"builds__modal__reviews__add__name__input":"builds__modal__reviews__add__name__input builds__modal__reviews__add__name__input_error"})),_.a.createElement("div",null,_.a.createElement("div",null,"Rating:"),_.a.createElement("div",{className:"author__rating"},_.a.createElement("div",{className:"add__review__star__cover",onClick:()=>t(1)},_.a.createElement("svg",{className:a>0?"build_review__star__icon":"build_review__star__icon build_review__star__icon__inactive",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},_.a.createElement("path",{d:"M12.9,2.6l2.3,5c0.1,0.3,0.4,0.5,0.7,0.6l5.2,0.8C22,9,22.3,10,21.7,10.6l-3.8,3.9c-0.2,0.2-0.3,0.6-0.3,0.9   l0.9,5.4c0.1,0.8-0.7,1.5-1.4,1.1l-4.7-2.6c-0.3-0.2-0.6-0.2-0.9,0l-4.7,2.6c-0.7,0.4-1.6-0.2-1.4-1.1l0.9-5.4   c0.1-0.3-0.1-0.7-0.3-0.9l-3.8-3.9C1.7,10,2,9,2.8,8.9l5.2-0.8c0.3,0,0.6-0.3,0.7-0.6l2.3-5C11.5,1.8,12.5,1.8,12.9,2.6z"}))),_.a.createElement("div",{className:"add__review__star__cover",onClick:()=>t(2)},_.a.createElement("svg",{className:a>1?"build_review__star__icon":"build_review__star__icon build_review__star__icon__inactive",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},_.a.createElement("path",{d:"M12.9,2.6l2.3,5c0.1,0.3,0.4,0.5,0.7,0.6l5.2,0.8C22,9,22.3,10,21.7,10.6l-3.8,3.9c-0.2,0.2-0.3,0.6-0.3,0.9   l0.9,5.4c0.1,0.8-0.7,1.5-1.4,1.1l-4.7-2.6c-0.3-0.2-0.6-0.2-0.9,0l-4.7,2.6c-0.7,0.4-1.6-0.2-1.4-1.1l0.9-5.4   c0.1-0.3-0.1-0.7-0.3-0.9l-3.8-3.9C1.7,10,2,9,2.8,8.9l5.2-0.8c0.3,0,0.6-0.3,0.7-0.6l2.3-5C11.5,1.8,12.5,1.8,12.9,2.6z"}))),_.a.createElement("div",{className:"add__review__star__cover",onClick:()=>t(3)},_.a.createElement("svg",{className:a>2?"build_review__star__icon":"build_review__star__icon build_review__star__icon__inactive",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},_.a.createElement("path",{d:"M12.9,2.6l2.3,5c0.1,0.3,0.4,0.5,0.7,0.6l5.2,0.8C22,9,22.3,10,21.7,10.6l-3.8,3.9c-0.2,0.2-0.3,0.6-0.3,0.9   l0.9,5.4c0.1,0.8-0.7,1.5-1.4,1.1l-4.7-2.6c-0.3-0.2-0.6-0.2-0.9,0l-4.7,2.6c-0.7,0.4-1.6-0.2-1.4-1.1l0.9-5.4   c0.1-0.3-0.1-0.7-0.3-0.9l-3.8-3.9C1.7,10,2,9,2.8,8.9l5.2-0.8c0.3,0,0.6-0.3,0.7-0.6l2.3-5C11.5,1.8,12.5,1.8,12.9,2.6z"}))),_.a.createElement("div",{className:"add__review__star__cover",onClick:()=>t(4)},_.a.createElement("svg",{className:a>3?"build_review__star__icon":"build_review__star__icon build_review__star__icon__inactive",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},_.a.createElement("path",{d:"M12.9,2.6l2.3,5c0.1,0.3,0.4,0.5,0.7,0.6l5.2,0.8C22,9,22.3,10,21.7,10.6l-3.8,3.9c-0.2,0.2-0.3,0.6-0.3,0.9   l0.9,5.4c0.1,0.8-0.7,1.5-1.4,1.1l-4.7-2.6c-0.3-0.2-0.6-0.2-0.9,0l-4.7,2.6c-0.7,0.4-1.6-0.2-1.4-1.1l0.9-5.4   c0.1-0.3-0.1-0.7-0.3-0.9l-3.8-3.9C1.7,10,2,9,2.8,8.9l5.2-0.8c0.3,0,0.6-0.3,0.7-0.6l2.3-5C11.5,1.8,12.5,1.8,12.9,2.6z"}))),_.a.createElement("div",{className:"add__review__star__cover",onClick:()=>t(5)},_.a.createElement("svg",{className:a>4?"build_review__star__icon":"build_review__star__icon build_review__star__icon__inactive",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},_.a.createElement("path",{d:"M12.9,2.6l2.3,5c0.1,0.3,0.4,0.5,0.7,0.6l5.2,0.8C22,9,22.3,10,21.7,10.6l-3.8,3.9c-0.2,0.2-0.3,0.6-0.3,0.9   l0.9,5.4c0.1,0.8-0.7,1.5-1.4,1.1l-4.7-2.6c-0.3-0.2-0.6-0.2-0.9,0l-4.7,2.6c-0.7,0.4-1.6-0.2-1.4-1.1l0.9-5.4   c0.1-0.3-0.1-0.7-0.3-0.9l-3.8-3.9C1.7,10,2,9,2.8,8.9l5.2-0.8c0.3,0,0.6-0.3,0.7-0.6l2.3-5C11.5,1.8,12.5,1.8,12.9,2.6z"}))))),_.a.createElement("div",{className:"builds__modal__reviews__add__comment__cover"},_.a.createElement("label",{htmlFor:"builds__review__text"},"Write your comment:"),_.a.createElement("textarea",{name:"comment",id:"builds__review__text",cols:30,rows:10,minLength:5,placeholder:"Comment",className:r?"builds__modal__reviews__add__text":"builds__modal__reviews__add__text builds__modal__reviews__add__text_error",onChange:e=>d(n.test(e.target.value))})),_.a.createElement("div",{className:"builds__modal__reviews__add__btns__cover"},_.a.createElement("div",{className:"builds__modal__reviews__add__btn__cover"},_.a.createElement("button",{className:"builds__modal__reviews__add__btn",onClick:()=>{e.modal(void 0)}},"Cancel")),_.a.createElement("div",{className:"builds__modal__reviews__add__btn__cover"},_.a.createElement("button",{type:"submit",className:"builds__modal__reviews__add__btn",onClick:()=>{if(s&&r){const t=document.querySelector("#builds__review__name"),l=document.querySelector("#builds__review__text"),_={name:t.value,text:l.value,rating:a};e.edit?(e.send(_,!0),e.modal(void 0)):(e.send(_,!1),e.modal(void 0))}}},"Confirm"))))))};var u=e=>_.a.createElement("div",{className:"builds__modal__reviews__cover"},_.a.createElement("div",{className:"builds__modal__reviews__add__cover",onClick:e=>e.stopPropagation()},_.a.createElement("div",{className:"builds__modal__reviews__show__cover"},e.reviews.length>0?e.reviews.map(e=>_.a.createElement("div",{key:e._id,className:"review__modal__show__cover"},_.a.createElement("div",null,_.a.createElement("p",{className:"review__modal__show__title"},e.name)),_.a.createElement("div",{className:"review__modal__show__rating__cover"},(e=>{const a=[];for(let t=0;t<5;t++)t<e?a.push(_.a.createElement("div",{className:"add__review__star__cover",key:t},_.a.createElement("svg",{className:"build_review__star__icon",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},_.a.createElement("path",{d:"M12.9,2.6l2.3,5c0.1,0.3,0.4,0.5,0.7,0.6l5.2,0.8C22,9,22.3,10,21.7,10.6l-3.8,3.9c-0.2,0.2-0.3,0.6-0.3,0.9   l0.9,5.4c0.1,0.8-0.7,1.5-1.4,1.1l-4.7-2.6c-0.3-0.2-0.6-0.2-0.9,0l-4.7,2.6c-0.7,0.4-1.6-0.2-1.4-1.1l0.9-5.4   c0.1-0.3-0.1-0.7-0.3-0.9l-3.8-3.9C1.7,10,2,9,2.8,8.9l5.2-0.8c0.3,0,0.6-0.3,0.7-0.6l2.3-5C11.5,1.8,12.5,1.8,12.9,2.6z"})))):a.push(_.a.createElement("div",{className:"add__review__star__cover",key:t},_.a.createElement("svg",{className:"build_review__star__icon build_review__star__icon__inactive",version:"1.1",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},_.a.createElement("path",{d:"M12.9,2.6l2.3,5c0.1,0.3,0.4,0.5,0.7,0.6l5.2,0.8C22,9,22.3,10,21.7,10.6l-3.8,3.9c-0.2,0.2-0.3,0.6-0.3,0.9   l0.9,5.4c0.1,0.8-0.7,1.5-1.4,1.1l-4.7-2.6c-0.3-0.2-0.6-0.2-0.9,0l-4.7,2.6c-0.7,0.4-1.6-0.2-1.4-1.1l0.9-5.4   c0.1-0.3-0.1-0.7-0.3-0.9l-3.8-3.9C1.7,10,2,9,2.8,8.9l5.2-0.8c0.3,0,0.6-0.3,0.7-0.6l2.3-5C11.5,1.8,12.5,1.8,12.9,2.6z"}))));return a})(e.rating)),_.a.createElement("div",{className:"review__modal__show__text__cover"},_.a.createElement("p",{className:"review__modal__show__text"},e.text)),_.a.createElement("div",{className:"review__modal__show__date__cover"},_.a.createElement("p",null,e.date.split("T")[0])))):_.a.createElement("h1",null,"No rewiews."))));class w extends _.a.Component{constructor(){super(...arguments),this.state={modalIsShow:!1,selectedItem:void 0,redirect:!1,minusModal:!1,reviewModal:!1,reviewModalEdit:!1,curBuildModalId:"",reviewsModalShow:!1},this.minusHandler=()=>{this.setState({minusModal:!0})},this.toggleModalHandler=()=>{this.setState({modalIsShow:!1})},this.redirectHandler=()=>{this.setState({redirect:!0})},this.handleScroll=()=>{const e=document.querySelectorAll(".ready__build__cover"),a=document.querySelectorAll(".ready__build__single__pic");e.forEach((e,t)=>{document.documentElement.scrollTop>=e.offsetTop-3*e.offsetHeight&&a[t].classList.add("ready__build__single__pic_active")})},this.toggleReviewModalHandler=e=>{this.setState(e=>({reviewModal:!e.reviewModal,reviewModalEdit:!1})),"edit"===e&&this.setState(e=>({reviewModalEdit:!e.reviewModalEdit}))},this.curBuildModalIdHandler=e=>{this.setState({curBuildModalId:e})},this.sendReviewHandler=(e,a)=>{const t=Object.assign({},e);t.user=this.props.auth.localId,t.build=this.state.curBuildModalId,a?this.props.sendEditedReviewFun(t):this.props.sendReviewFun(t)},this.showReviewsIdModalHandler=()=>{this.setState(e=>({reviewsModalShow:!e.reviewsModalShow}))}}componentDidMount(){this.handleScroll(),document.addEventListener("scroll",this.handleScroll),this.props.getBuildsFun()}componentWillUnmount(){document.removeEventListener("scroll",this.handleScroll)}componentDidUpdate(e,a){e.builds.builds.length!==this.props.builds.builds.length&&this.handleScroll()}render(){return _.a.createElement("section",{className:"ready__builds__main__cover"},this.state.redirect?_.a.createElement(i.a,{to:"/checkout"}):null,_.a.createElement(n.a,{toggle:this.props.builds.isLoading},_.a.createElement(o.a,null)),_.a.createElement(n.a,{toggle:this.state.reviewsModalShow},_.a.createElement("div",{className:"modal__background",onClick:this.showReviewsIdModalHandler},_.a.createElement(u,{reviews:this.props.builds.reviews}))),_.a.createElement(n.a,{toggle:this.state.modalIsShow},_.a.createElement("div",{className:"modal__background",onClick:this.toggleModalHandler},_.a.createElement(r,{add:this.props.addFun,redirect:this.redirectHandler,curPizza:this.state.selectedItem,builds:this.props.builds.builds}))),_.a.createElement(n.a,{toggle:this.state.reviewModal},_.a.createElement("div",{className:"modal__background",onClick:()=>this.toggleReviewModalHandler(void 0)},_.a.createElement(v,{modal:this.toggleReviewModalHandler,send:this.sendReviewHandler,edit:this.state.reviewModalEdit}))),_.a.createElement(n.a,{toggle:this.state.minusModal},_.a.createElement("div",{className:"modal__background",onClick:()=>this.setState({minusModal:!1})},_.a.createElement("div",{className:"info__modal__cover"},_.a.createElement("div",{className:"info__modal__title"},_.a.createElement("h1",{className:"info__modal__title__text"},"You can`t delete ingredients from ready builds, but you can build your own pizza in pizza builder..."))))),this.props.builds.builds.length>0?this.props.builds.builds.map(e=>{if(e.ingredients)return _.a.createElement("div",{key:e._id,className:"ready__build__cover"},_.a.createElement("h3",{className:"builds__pizza__title__text"},_.a.createElement("span",{className:"builds__pizza__title"},e.name)),_.a.createElement("div",{className:"ready__build__single__pic"},_.a.createElement("img",{src:this.props.browser.safari?`assets/img/${e.name}.png`:`assets/img/webp/${e.name}.webp`,alt:e.name})),_.a.createElement("div",{className:"single__build__ingredients__cover"},_.a.createElement(d.a,{ingredients:e.ingredients,minus:this.minusHandler,showCross:"false",browser:this.props.browser})),_.a.createElement("div",{className:"single__build__params__cover"},_.a.createElement("div",null,_.a.createElement("p",null,"Weigth is: ",e.weight,"g."),_.a.createElement("p",null,"Cost is: ",e.cost,"$"),_.a.createElement("p",null,"Diameter is: ",e.diameter,"cm.")),_.a.createElement(m,{auth:this.props.auth,reviews:e.reviews,modal:this.toggleReviewModalHandler,id:e.id,setId:this.curBuildModalIdHandler,showReviews:this.props.setCurReviewsToShowFun,showReviewsModal:this.showReviewsIdModalHandler})),_.a.createElement("div",{className:"single__build__order__cover"},_.a.createElement("button",{className:"single__build__order",onClick:()=>this.setState({modalIsShow:!0,selectedItem:e})},"Order")))}):_.a.createElement("h1",null,"No builds yet"))}}a.default=Object(s.b)(e=>({builds:e.builds,auth:e.auth,browser:e.browser}),e=>({addFun:a=>e(Object(c.S)(a)),getBuildsFun:()=>e(Object(c.I)()),sendReviewFun:a=>e(Object(c.Z)(a)),sendEditedReviewFun:a=>e(Object(c.Y)(a)),setCurReviewsToShowFun:a=>e(Object(c.db)(a))}))(w)},76:function(e,a,t){"use strict";var l=t(0),_=t.n(l);a.a=e=>{let a=Object.keys(e.ingredients).map(a=>{let t=a;return e.ingredients[t].count>0?_.a.createElement("div",{className:"pizza__view__icon",key:a},_.a.createElement("div",{className:"pizza__view__icon__count"},_.a.createElement("strong",null,e.ingredients[t].count,"X")),"false"==e.showCross?null:_.a.createElement("div",{className:"pizza__view__icon__delete","data-value":a,onClick:a=>{const t=a.target;t.getAttribute("data-value"),e.minus(t.getAttribute("data-value"))}}),_.a.createElement("div",{className:"pizza__view__icon__pic"},_.a.createElement("img",{src:e.browser&&e.browser.safari?`assets/img/${a}.png`:`assets/img/webp/${a}.webp`,alt:a,className:"pizza__view__icon__image"}))):null});return _.a.createElement("div",{className:"cover__for__indredient__icon"},a)}}}]);